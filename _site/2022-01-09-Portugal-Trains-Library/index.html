<!DOCTYPE html>
<html lang="en">
<!-- Beautiful Jekyll 5.0.0 | Copyright Dean Attali 2020 -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  <title>Swift Library - Portugal Trains</title>
  
  <meta name="author" content="Joao Pires">
  
  <meta name="description" content="A Swift Library to query the Infraestruturas de Portugal (IP) API.">
  
  
  
  <link rel="alternate" type="application/rss+xml" title="JoaoPires.com" href="http://localhost:4000/feed.xml">
  
  

  

  

  

  
    
      
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
      
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">


    
  
  
    
      <link rel="stylesheet" href="/assets/css/bootstrap-social.css">
    
      <link rel="stylesheet" href="/assets/css/beautifuljekyll.css">
    
  
  
  
  
  
  
  <meta property="og:site_name" content="JoaoPires.com">
  <meta property="og:title" content="Swift Library - Portugal Trains">
  <meta property="og:description" content="A Swift Library to query the Infraestruturas de Portugal (IP) API.">
  
  <meta property="og:image" content="http://localhost:4000/assets/img/avatar-icon.jpg">
  
  
  <meta property="og:type" content="article">
  <meta property="og:article:author" content="Joao Pires">
  <meta property="og:article:published_time" content="2022-01-09T00:00:00+01:00">
  <meta property="og:url" content="http://localhost:4000/2022-01-09-Portugal-Trains-Library/">
  <link rel="canonical" href="http://localhost:4000/2022-01-09-Portugal-Trains-Library/">
  
  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@_joaocpires">
  <meta name="twitter:creator" content="@_joaocpires">
  <meta property="twitter:title" content="Swift Library - Portugal Trains">
  <meta property="twitter:description" content="A Swift Library to query the Infraestruturas de Portugal (IP) API.">
  
  <meta name="twitter:image" content="http://localhost:4000/assets/img/avatar-icon.jpg">
  
  

  
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
    }
    </style>
</head>


<body>

  


  <nav class="navbar navbar-expand-xl navbar-light fixed-top navbar-custom top-nav-regular"><a class="navbar-brand" href="http://localhost:4000/">JoaoPires.com</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="main-navbar">
    <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="/projects">Projects</a>
          </li></ul>
  </div>

  

  
    <div class="avatar-container">
      <div class="avatar-img-border">
        <a href="/index.html">
          <img alt="Navigation bar avatar" class="avatar-img" src="/assets/img/avatar-icon.jpg" />
        </a>
      </div>
    </div>
  

</nav>





  <!-- TODO this file has become a mess, refactor it -->







<header class="header-section ">

<div class="intro-header no-img">
  <div class="container-md">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
        <div class="post-heading">
          <h1>Swift Library - Portugal Trains</h1>
          
            
              <h2 class="post-subheading">A Swift Library to query the Infraestruturas de Portugal (IP) API.</h2>
            
          

          
            <span class="post-meta">Posted on 2022 January 9</span>
            
            
          
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class=" container-md ">
  <div class="row">
    <div class=" col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 ">

      

      

      <article role="main" class="blog-post">
        <p>In the process of rebuilding my App Portfolio, I’ve been rewriting some abandoned apps I have. The first app in my sight is called redE - Comboios de Portugal.</p>

<p>This app allowed the users to check the time tables of trains in a given train station in <em>almost</em> real time.</p>

<h1 id="the-api">The API</h1>

<p>This library is in the core of the app’s functionality. It what allows to search for the train stations, get said stations time tables, and in the future will also allow to check the time table per train.</p>

<p>The API however is not documented at all. It’s open in the IP’s <a href="https://www.infraestruturasdeportugal.pt">website</a>, but there’s no documentation, and no assurance that it will keep working in the future - but we work with what we have.</p>

<h1 id="architecture">Architecture</h1>

<p>I tried to keep the library as simple as possible. There’s one main object that is exposed, <code class="language-plaintext highlighter-rouge">StationService</code> and it has both synchronous and asynchronous methods to get the relevant data. There either return a <code class="language-plaintext highlighter-rouge">Result.Type</code> or a model representing the API data.</p>

<p>The returned objects are all part of the <code class="language-plaintext highlighter-rouge">StationService</code> simply because I like the semantics of <code class="language-plaintext highlighter-rouge">StationSerice.Node</code> and <code class="language-plaintext highlighter-rouge">StationService.StationQueryReply</code>. They clearly indicate what it being returned to the user.</p>

<p>There’s not much (read nothing) in terms of HTTP headers that is required, as such, a simple <code class="language-plaintext highlighter-rouge">DataTask</code> is used throughout.</p>

<p>The full documentation can be found <a href="https://github.com/joaoc-pires/PortugalTrains">here</a>.</p>

<p>The app, once (re-)released, can be found <a href="https://apps.apple.com/us/app/rede-comboios-de-portugal/id1447635458">here</a>.</p>

      </article>

      
        <div class="blog-tags">
          <span>Tags:</span>
          
            <a href="/tags#projects">projects</a>
          
            <a href="/tags#library">library</a>
          
            <a href="/tags#swift">swift</a>
          
        </div>
      

      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  <!-- 
    <a href="https://twitter.com/intent/tweet?text=Swift+Library+-+Portugal+Trains&url=http%3A%2F%2Flocalhost%3A4000%2F2022-01-09-Portugal-Trains-Library%2F"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fab fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  

  
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2F2022-01-09-Portugal-Trains-Library%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fab fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

  

   -->

</section>



      

      <!-- <ul class="pagination blog-pager">
        
        <li class="page-item previous">
          <a class="page-link" href="/2022-01-08-minimalist-to-a-fault/" data-toggle="tooltip" data-placement="top" title="Minimalist to a fault">&larr; Previous Post</a>
        </li>
        
        
      </ul> -->
      

    </div>
  </div>
</div>


  <footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      <ul class="list-inline text-center footer-links"><li class="list-inline-item">
    <a href="/feed.xml" title="RSS">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">RSS</span>
    </a>
  </li><li class="list-inline-item">
    <a href="mailto:mail@joaopires.com" title="Email me">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Email me</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://github.com/joaoc-pires" title="GitHub">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-github fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">GitHub</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://twitter.com/_joaocpires" title="Twitter">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Twitter</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://linkedin.com/in/joao-carlos-pires-0634b6b3" title="LinkedIn">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">LinkedIn</span>
   </a>
  </li></ul>

      
      <p class="copyright text-muted">
      
        Joao Pires
        &nbsp;&bull;&nbsp;
      
      2023

      
        &nbsp;&bull;&nbsp;
        <span class="author-site">
          <a href="http://localhost:4000/">joaopires.com  </a>
        </span>
      

      
      </p>
      
      </div>
    </div>
  </div>
</footer>


  
  
    
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>


  
    
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>


  
    
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


  



  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/beautifuljekyll.js"></script>
    
  









</body>
</html>
